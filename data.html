<!DOCTYPE html>
<html lang="fr">
<head>
    <!-- Basic -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">   
   
    <!-- Mobile Metas -->
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
 
     <!-- Site Metas -->
    <title>Quelques chiffres</title>  
    <meta name="keywords" content="TSEB2ENERGIE, bornes, recharge, véhicules électriques, charge, VAE, EV, wallbox">
    <meta name="description" content="TSEB2ENERGIE conçoit, fabrique et propose des bornes de recharge pour vos véhicules électriques (voiture, vélo) avec le meilleur rapport qualité prix. Gardez le contrôle sur vos recharges.">
    <meta name="author" content="TSEB2ENERGIE">

    <!-- Site Icons -->
	<link rel="apple-touch-icon" sizes="180x180" href="images/favicon/apple-touch-icon.png">
	<link rel="icon" type="image/png" sizes="32x32" href="images/favicon/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="images/favicon/favicon-16x16.png">
	<link rel="manifest" href="images/favicon/site.webmanifest"> 	

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <!-- Site CSS -->
    <link rel="stylesheet" href="style.css">
    <!-- Colors CSS -->
    <link rel="stylesheet" href="css/colors.css">
    <!-- ALL VERSION CSS -->
    <link rel="stylesheet" href="css/versions.css">
    <!-- Responsive CSS -->
    <link rel="stylesheet" href="css/responsive.css">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/custom.css">

    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Load d3.js -->
<script src="https://d3js.org/d3.v4.js"></script>

<!-- Load d3.js & color scale -->
<script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>


    
</head>
<body class="seo_version">

	<!-- LOADER -->
	<div id="preloader">
		<div id="cupcake" class="box">
			<span class = "letter box">E</span>
			<span class = "letter box">N</span>
			<span class = "letter box">&nbsp;</span>
			<div class = "cupcakeCircle box">
				<div class = "cupcakeInner box">
					<div class = "cupcakeCore box"></div>	
				</div>
			</div>  	
			<span class = "letter box">&nbsp;</span>			
			<span class = "letter box">C</span>
			<span class = "letter box">H</span>
			<span class = "letter box">A</span>
			<span class = "letter box">R</span>
			<span class = "letter box">G</span>
			<span class = "letter box">E</span>
		</div>
	</div>
	<!-- END LOADER -->

    <header class="header header_style_01">
        <nav class="megamenu navbar navbar-default">
            <div class="container">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="index.html"><img src="images/logos/logo-head.png" alt="image"></a>
                </div>
                <div id="navbar" class="navbar-collapse collapse">
                    <ul class="nav navbar-nav navbar-right menu-top">
                        
                        <li><a href="index.html">Accueil</a></li>
                        <li><a href="data.html">Data</a></li>
                        <li><a class="active" href="contact.html">Contactez-nous</a></li>
                    </ul>
                </div>
            </div>
        </nav>
    </header>

    
        
            
    <div class="all-page-title" style="background-image:url(images/pattern-4.png);">
        <div class="container text-center">
            <h1>Quelques chiffres</h1>
        </div>
		<!--Page -->
        <div class="page-info">
            <div class="container">
            	<div class="inner-container">
					<img src="images/team-icons/cherchedata.svg" alt="contact" class="wow fadeInUp">
                    <ul class="bread-crumb">
                        <li class="flaticon-mail"><a href="mailto:contact@TSEB2ENERGIE.fr">contact@TSEB2ENERGIE.fr</a></li>
                    </ul>					
                </div>
            </div>
        </div>
        <!--End Page-->
    </div><!-- end section -->
    
    
    
    <svg id="clouds" class="hidden-xs" xmlns="http://www.w3.org/2000/svg" version="1.1" width="100%" height="100" viewBox="0 0 85 100" preserveAspectRatio="none">
        <path d="M-5 100 Q 0 20 5 100 Z
            M0 100 Q 5 0 10 100
            M5 100 Q 10 30 15 100
            M10 100 Q 15 10 20 100
            M15 100 Q 20 30 25 100
            M20 100 Q 25 -10 30 100
            M25 100 Q 30 10 35 100
            M30 100 Q 35 30 40 100
            M35 100 Q 40 10 45 100
            M40 100 Q 45 50 50 100
            M45 100 Q 50 20 55 100
            M50 100 Q 55 40 60 100
            M55 100 Q 60 60 65 100
            M60 100 Q 65 50 70 100
            M65 100 Q 70 20 75 100
            M70 100 Q 75 45 80 100
            M75 100 Q 80 30 85 100
            M80 100 Q 85 20 90 100
            M85 100 Q 90 50 95 100
            M90 100 Q 95 25 100 100
            M95 100 Q 100 15 105 100 Z">
        </path>
    </svg>

    
<!-- deuxieme graphe-->
    <div id="support" class="section wb">
        <div class="container">
            <div class="section-title text-center">
                <h3>Les différences d'émission carbone lors de la production</h3>
            </div><!-- end title -->

            <div class="row">
                <div class="col-md-6">
                    <div class="contact_form" id="my_dataviz">
                       
                    </div>
                </div><!-- end col -->
				<div class="col-md-6">
					<div class="map-box">
						<img src="images/team-icons/support.svg" alt="support" class="wow fadeInUp">
					</div>
				</div><!-- end col -->
            </div><!-- end row -->
        </div><!-- end container -->
    </div><!-- end section -->
<!-- deuxieme graphe-->
    <div id="support" class="section wb">
        <div class="container">
            <div class="section-title text-center">
                <h3>Les différences d'émission carbone lors de la production</h3>
            </div><!-- end title -->

            <div class="row">
                <div class="col-md-6">
                    <div class="contact_form" id="div">
                       
                    </div>
                </div><!-- end col -->
				<div class="col-md-6">
					<div class="map-box">
						<img src="images/team-icons/support.svg" alt="support" class="wow fadeInUp">
					</div>
				</div><!-- end col -->
            </div><!-- end row -->
        </div><!-- end container -->
    </div><!-- end section -->

    <div id="support" class="section db">
        <div class="container">
            <div class="row">
                <div id="logo-carousel" class="owl-carousel">
					<div> <img src="images/other-logos/Logo-Advenir-white.png" alt="Advenir"> </div>
					<div> <img src="images/other-logos/cropped-Logo-blanc-IRVE-France-sans-baseline.png" alt="IRVE"> </div>
				</div>
            </div><!-- end row -->
        </div><!-- end container -->
    </div><!-- end section -->

    
    <svg id="clouds1" class="hidden-xs" xmlns="http://www.w3.org/2000/svg" version="1.1" width="100%" height="100" viewBox="0 0 85 100" preserveAspectRatio="none">
        <path d="M-5 100 Q 0 20 5 100 Z
            M0 100 Q 5 0 10 100
            M5 100 Q 10 30 15 100
            M10 100 Q 15 10 20 100
            M15 100 Q 20 30 25 100
            M20 100 Q 25 -10 30 100
            M25 100 Q 30 10 35 100
            M30 100 Q 35 30 40 100
            M35 100 Q 40 10 45 100
            M40 100 Q 45 50 50 100
            M45 100 Q 50 20 55 100
            M50 100 Q 55 40 60 100
            M55 100 Q 60 60 65 100
            M60 100 Q 65 50 70 100
            M65 100 Q 70 20 75 100
            M70 100 Q 75 45 80 100
            M75 100 Q 80 30 85 100
            M80 100 Q 85 20 90 100
            M85 100 Q 90 50 95 100
            M90 100 Q 95 25 100 100
            M95 100 Q 100 15 105 100 Z">
        </path>
    </svg>

	<footer class="footer">
        <div class="container">
            <div class="row">
                <div class="col-md-6 col-sm-6 col-xs-12">
                    <div class="widget clearfix">
                        <div class="widget-title">
                            <img src="images/logos/logo-footer.png" alt="TSEB2ENERGIE">
                        </div>
                        <p>TSEB2ENERGIE, spécialiste français des bornes de recharge.</p>
                    </div><!-- end clearfix -->
                </div><!-- end col -->

                <div class="col-md-3 col-sm-3 col-xs-12">
                    <div class="widget clearfix">
                        <div class="widget-title">
                            <img src="images/icons/Eco_Car_Isometric.svg" alt="TSEB2ENERGIE">
                        </div>
                    </div><!-- end clearfix -->
                </div><!-- end col -->

                <div class="col-md-6 col-sm-6 col-xs-12">
                    <div class="widget clearfix">
                        <div class="widget-title">
                            <h3>Coordonnées</h3>
                        </div>

                        <ul class="footer-links">
                            <li><a href="mailto:contact@TSEB2ENERGIE.fr">contact@TSEB2ENERGIE.fr</a></li>
                            <li><a href="https://TSEB2ENERGIE.fr">www.TSEB2ENERGIE.fr</a></li>
                            <li>25 Rue Dr Rémy Annino, 42000 Saint-Étienne FRANCE</li>
                            <!--<li>+33 4 0000 0000</li>-->
                        </ul><!-- end links -->
                    </div><!-- end clearfix -->
                </div><!-- end col -->

            </div><!-- end row -->
        </div><!-- end container -->
    </footer><!-- end footer -->
	
    <div class="copyrights">
        <div class="container">
            <div class="footer-distributed">
                <div class="footer-left">
                    <p class="footer-company-name">&copy; TSEB2ENERGIE 2022</p>
                </div>
            </div>
        </div><!-- end container -->
    </div><!-- end copyrights -->

    <a href="#" id="scroll-to-top" class="dmtop global-radius"><i class="fa fa-angle-up"></i></a>

    <!-- ALL JS FILES -->
    <script src="js/all.js"></script>
    <!-- ALL PLUGINS -->
    <script src="js/custom.js"></script>

    <script>

        // set the dimensions and margins of the graph
        var width2 = 590
        var height2 = 590
        var margin2 = 100
        
        // The radius of the pieplot is half the width or half the height (smallest one). I subtract a bit of margin.
        var radius = Math.min(width2, height2) / 2 - margin2
        
        // append the svg object to the div called 'deez_nuts'
        var svg2 = d3.select("#div")
          .append("svg")
            .attr("width", width2)
            .attr("height", height2)
          .append("g")
            .attr("transform", "translate(" + width2 / 2 + "," + height2 / 2 + ")");
        
        // Create dummy data
        var data = {Vélo_électrique:0.165, 
                    Voiture_électrique:6.57, 
                    Voiture_thermique:3.74, 
                    Vélo:0.100, 
                    }
        
        // set the color scale
        const color = d3.scaleOrdinal()
  .domain(["Vélo_électrique", "Voiture_électrique", "Voiture_thermique", "Vélo"])
  .range(["grey", "#57517B", "#68e1fd" , "#87CEEB" ]);
      
          
        // Compute the position of each group on the pie:
        var pie = d3.pie()
          .sort(null) // Do not sort group by size
          .value(function(d) {return d.value; })
        var data_ready = pie(d3.entries(data))
        
        // The arc generator
        var arc = d3.arc()
          .innerRadius(radius * 0.5)         // This is the size of the donut hole
          .outerRadius(radius * 0.8)
        
        // Another arc that won't be drawn. Just for labels positioning
        var outerArc = d3.arc()
          .innerRadius(radius * 0.9)
          .outerRadius(radius * 0.9)
        
        // Build the pie chart: Basically, each part of the pie is a path that we build using the arc function.
       svg2
          .selectAll('allSlices')
          .data(data_ready)
          .enter()
          .append('path')
          .attr('d', arc)
          .attr('fill', function(d){ return(color(d.data.key)) })
          .attr("stroke", "white")
          .style("stroke-width", "2px")
          .style("opacity", 0.7)
        
        // Add the polylines between chart and labels:
        svg2
          .selectAll('allPolylines')
          .data(data_ready)
          .enter()
          .append('polyline')
            .attr("stroke", "black")
            .style("fill", "none")
            .attr("stroke-width", 1)
            .attr('points', function(d) {
              var posA = arc.centroid(d) // line insertion in the slice
              var posB = outerArc.centroid(d) // line break: we use the other arc generator that has been built only for that
              var posC = outerArc.centroid(d); // Label position = almost the same as posB
              var midangle = d.startAngle + (d.endAngle - d.startAngle) / 2 // we need the angle to see if the X position will be at the extreme right or extreme left
              posC[0] = radius * 0.95 * (midangle < Math.PI ? 1 : -1); // multiply by 1 or -1 to put it on the right or on the left
              return [posA, posB, posC]
            })
        
        // Add the polylines between chart and labels:
        svg2
          .selectAll('allLabels')
          .data(data_ready)
          .enter()
          .append('text')
            .text( function(d) { console.log(d.data.key) ; return d.data.key } )
            .attr('transform', function(d) {
                var pos = outerArc.centroid(d);
                var midangle = d.startAngle + (d.endAngle - d.startAngle) / 2
                pos[0] = radius * 0.99 * (midangle < Math.PI ? 1 : -1);
                return 'translate(' + pos + ')';
            })
            .style('text-anchor', function(d) {
                var midangle = d.startAngle + (d.endAngle - d.startAngle) / 2
                return (midangle < Math.PI ? 'start' : 'end')
            })
        
        </script>
        <script>

            // set the dimensions and margins of the graph
            const margin = {top: 10, right: 30, bottom: 20, left: 50},
                width = 460 - margin.left - margin.right,
                height = 400 - margin.top - margin.bottom;
            
            // append the svg object to the body of the page
            const svg = d3.select("#my_dataviz")
              .append("svg")
                .attr("width", width + margin.left + margin.right)
                .attr("height", height + margin.top + margin.bottom)
              .append("g")
                .attr("transform",`translate(${margin.left},${margin.top})`);
            
            // Parse the Data
            d3.csv("./data_stacked.csv").then( function(data) {
            
              // List of subgroups = header of the csv files = soil condition here
              const subgroups = data.columns.slice(1)
            
              // List of groups = species here = value of the first column called group -> I show them on the X axis
              const groups = data.map(d => d.group)
            
              console.log(groups)
            
              // Add X axis
              const x = d3.scaleBand()
                  .domain(groups)
                  .range([0, width])
                  .padding([0.2])
              svg.append("g")
                .attr("transform", `translate(0, ${height})`)
                .call(d3.axisBottom(x).tickSize(0));
            
              // Add Y axis
              const y = d3.scaleLinear()
                .domain([0, 40])
                .range([ height, 0 ]);
              svg.append("g")
                .call(d3.axisLeft(y));
            
              // Another scale for subgroup position?
              const xSubgroup = d3.scaleBand()
                .domain(subgroups)
                .range([0, x.bandwidth()])
                .padding([0.05])
            
              // color palette = one color per subgroup
              const color = d3.scaleOrdinal()
                .domain(subgroups)
                .range(['#e41a1c','#377eb8','#4daf4a'])
            
              // Show the bars
              svg.append("g")
                .selectAll("g")
                // Enter in data = loop group per group
                .data(data)
                .join("g")
                  .attr("transform", d => `translate(${x(d.group)}, 0)`)
                .selectAll("rect")
                .data(function(d) { return subgroups.map(function(key) { return {key: key, value: d[key]}; }); })
                .join("rect")
                  .attr("x", d => xSubgroup(d.key))
                  .attr("y", d => y(d.value))
                  .attr("width", xSubgroup.bandwidth())
                  .attr("height", d => height - y(d.value))
                  .attr("fill", d => color(d.key));
            
            })
            
            </script>

</body>
</html>